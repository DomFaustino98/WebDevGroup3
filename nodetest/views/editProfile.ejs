<!DOCTYPE html>
<html lang ='en'>
<head>
<title> Edit Profile | Movie Meet Up </title>
<link rel='stylesheet' href='css/edit-profile-style.css'>
<!--favicon originally called '1f37f.svg' from icons8-->
<link rel='icon' type='image/png' href='../images/popcorn-favicon-icons8-small.png'>
</head>

<script type = 'text/javascript' src='js/bootstrap-filestyle.min.js'>

  function preview_image(event) {
     var reader = new FileReader();
     reader.onload = function(){
       var output = document.getElementById('output_image');
       output.src = reader.result;
     }
     reader.readAsDataURL(event.target.files[0]);
   }

  function isDone(){
   result = confirm('Done changing your profile?');
  }
  function toGenres(){
   result = confirm('To Genre Selection Page?');
  }
  function undo(f){
   f.fname.value = User.givenName;
   f.lname.value = User.familyName;
   f.username.value = User.username;
   f.bio.value = User.bio;
   f.favMovie.value = User.favMovie;
   f.profileImage.value = User.profilePic;
   result = confirm('Undo changes?');
  }

</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
   console.log("Test");
   $("#file").change(function() { this.form.submit(); });
   console.log("Test");
</script>

<body>

    <div class='edit-form'>

      <h1 class='form-title'> Edit Profile </h1>
      <form action='/profiler/EditProfileProc' method='POST' id='form'>

        <p>About You</p>
        <input type='text' class='input-box' required placeholder='first name' name='fname' id='fname' value='<%= User.firstname %>'>
        <input type='text' class='input-box' required placeholder='last name' name='lname' id='lname' value='<%= User.lastname %>'>
        <input type='text' class='input-box' maxlength='30'required placeholder='username' name='name' id='name' value='<%= User.name %>'>
        <!-- note: bio(includes max length) and favorite movie are not set to required -->
        <input type='text' class='input-box' maxlength='280' placeholder='bio' id='bio' name='bio' value='<%= User.bio %>'>
        <input type='text' class='input-box' maxlength='280' placeholder='favorite movie' id='favMovie' name='favMovie' value='<%= User.favmovie %>'>
        <!-- button to direct user to GENERE SELECT PAGE -->
        <button type='submit' value='edit genres' id='pickGenres' onsubmit='return toGenres()' action='editGenres.ejs'>edit genres</button>  
      </form>

        <form method="POST" id='fileupload'enctype="multipart/form-data" action="/upload">
        <p>Profile Picture</p>
        <input type="file" id="file" name="profilepic" accept="image/*" value="<%= User.profilepic %>" > 
        <img id="output_image"/> <br><br><hr>
        <!--SAVE AND RETURN TO PROFILE VIEWER-->
        <button type='submit' class='btn' id='submit'>save</button>
      </form>
        <!--CANCEL AND RETURN TO PROFILE VIEWER, button that looks like a hyperlink-->
        <form action='/profiler/profilerProc.html' method='POST' id='form'>
        <input type="hidden" name="id" value='<%= User.id %>'/>
        <input type ='submit' value ='cancel and return to profile' id ='cancelSubmit'>
      </form>
    </div><!-- close div for class edit form -->

</body>

</html>
